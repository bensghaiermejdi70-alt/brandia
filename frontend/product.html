async function loadProducts() {
  const container = document.getElementById('products-container');
  if (!container) return;
  
  container.innerHTML = '<div class="col-span-full text-center py-12"><i class="fas fa-spinner fa-spin text-indigo-400 text-2xl"></i><p class="text-neutral-500 mt-2">Chargement...</p></div>';

  try {
    if (typeof BrandiaAPI === 'undefined') throw new Error('API non chargée');

    // CONSTRUCTION DES PARAMÈTRES
    const params = {};
    
    // Si une catégorie est sélectionnée, on l'envoie à l'API
    if (state.filters.category) {
      params.category = state.filters.category;
    }
    
    // Recherche textuelle
    if (state.filters.search) {
      params.search = state.filters.search;
    }
    
    console.log('[Catalogue] Filtres:', params);
    
    const data = await BrandiaAPI.Products.getAll(params);
    console.log('[Catalogue] Réponse:', data);
    
    let products = [];
    if (data && data.data && Array.isArray(data.data.products)) {
      products = data.data.products;
    } else if (data && Array.isArray(data.products)) {
      products = data.products;
    }
    
    // FILTRAGE PRIX CÔTÉ CLIENT (si l'API ne le fait pas)
    if (state.filters.minPrice) {
      products = products.filter(p => parseFloat(p.price) >= state.filters.minPrice);
    }
    if (state.filters.maxPrice) {
      products = products.filter(p => parseFloat(p.price) <= state.filters.maxPrice);
    }
    
    // Tri
    const sort = document.getElementById('sort-select')?.value || 'newest';
    if (sort === 'price_asc') {
      products.sort((a, b) => parseFloat(a.price) - parseFloat(b.price));
    } else if (sort === 'price_desc') {
      products.sort((a, b) => parseFloat(b.price) - parseFloat(a.price));
    }

    state.products = products;
    renderProducts(products);
    
  } catch (error) {
    console.error('Erreur:', error);
    container.innerHTML = `<div class="col-span-full text-center text-red-400 py-8">
      <i class="fas fa-exclamation-circle text-2xl mb-2"></i><br>
      ${error.message}
    </div>`;
  }
}