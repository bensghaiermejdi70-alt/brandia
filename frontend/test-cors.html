<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Test CORS - Brandia API</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 50px; background: #f0f0f0; }
    button { background: #007bff; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 5px; cursor: pointer; }
    button:hover { background: #0056b3; }
    #result { margin-top: 20px; padding: 20px; background: white; border-radius: 5px; min-height: 100px; }
    .success { color: green; }
    .error { color: red; }
  </style>
</head>
<body>
  <h1>üß™ Test CORS - Brandia API</h1>
  <button onclick="testAPI()">Tester /api/health</button>
  <button onclick="clearResult()">Effacer</button>
  
  <div id="result">
    <p>Clique sur un bouton pour tester...</p>
  </div>

  <script>
    const API_URL = 'http://localhost:4000';

    function showResult(html) {
      document.getElementById('result').innerHTML = html;
    }

    function testAPI() {
      showResult('<p>‚è≥ Test en cours...</p>');
      
      fetch(`${API_URL}/api/health`)
        .then(response => response.json())
        .then(data => {
          showResult(`
            <h3 class="success">‚úÖ SUCC√àS</h3>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          `);
        })
        .catch(error => {
          showResult(`
            <h3 class="error">‚ùå ERREUR</h3>
            <p>${error.message}</p>
            <p>V√©rifie que le backend est d√©marr√© sur le port 4000</p>
          `);
        });
    }

    function clearResult() {
      showResult('<p>Clique sur un bouton pour tester...</p>');
    }
  </script>
</body>
</html>